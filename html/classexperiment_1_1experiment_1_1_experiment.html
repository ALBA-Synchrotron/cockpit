<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OMX Cockpit: experiment.experiment.Experiment Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OMX Cockpit
   &#160;<span id="projectnumber">.01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>experiment</b></li><li class="navelem"><b>experiment</b></li><li class="navelem"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html">Experiment</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classexperiment_1_1experiment_1_1_experiment-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">experiment.experiment.Experiment Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class is the root class for generating and running experiments.  
 <a href="classexperiment_1_1experiment_1_1_experiment.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for experiment.experiment.Experiment:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classexperiment_1_1experiment_1_1_experiment.png" usemap="#experiment.experiment.Experiment_map" alt=""/>
  <map id="experiment.experiment.Experiment_map" name="experiment.experiment.Experiment_map">
<area href="classexperiment_1_1offset_gain_correction_1_1_offset_gain_correction_experiment.html" title="This class collects the data needed to generate an offset and gain correction file." alt="experiment.offsetGainCorrection.OffsetGainCorrectionExperiment" shape="rect" coords="0,56,380,80"/>
<area href="classexperiment_1_1structured_illumination_1_1_s_i_experiment.html" title="This class handles SI experiments." alt="experiment.structuredIllumination.SIExperiment" shape="rect" coords="390,56,770,80"/>
<area href="classexperiment_1_1swept_shutter_1_1_open_shutter_sweep_experiment.html" title="This class handles open-shutter sweep experiments, where we move the sample continuously while exposi..." alt="experiment.sweptShutter.OpenShutterSweepExperiment" shape="rect" coords="780,56,1160,80"/>
<area href="classexperiment_1_1z_stack_1_1_z_stack_experiment.html" title="This class handles classic Z-stack experiments." alt="experiment.zStack.ZStackExperiment" shape="rect" coords="1170,56,1550,80"/>
<area href="classexperiment_1_1z_stack_multi_1_1_z_stack_multi_experiment.html" title="Just like a standard Z-stack experiment, but we do multiple exposure times at each Z slice..." alt="experiment.zStackMulti.ZStackMultiExperiment" shape="rect" coords="1560,56,1940,80"/>
<area href="classexperiment_1_1response_map_1_1_response_map_experiment.html" title="This class collects the data needed to perform response-map correction." alt="experiment.responseMap.ResponseMapExperiment" shape="rect" coords="0,112,380,136"/>
<area href="classexperiment_1_1opto_script_example_1_1_opto_experiment.html" title="This experiment is an example of a custom opto script." alt="experiment.optoScriptExample.OptoExperiment" shape="rect" coords="975,112,1355,136"/>
<area href="classexperiment_1_1stuttered_z_stack_1_1_stuttered_z_stack_experiment.html" title="This class handles experiments where we alter the rate at which we take stacks as a function of time..." alt="experiment.stutteredZStack.StutteredZStackExperiment" shape="rect" coords="1365,112,1745,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2eb466bdd54f066ce60f422aa87a35de"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a2eb466bdd54f066ce60f422aa87a35de">__init__</a></td></tr>
<tr class="memdesc:a2eb466bdd54f066ce60f422aa87a35de"><td class="mdescLeft">&#160;</td><td class="mdescRight">This constructor accepts certain parameters that will be shared by all experiment types.  <a href="#a2eb466bdd54f066ce60f422aa87a35de"></a><br/></td></tr>
<tr class="memitem:a66766d69d2f6dd4c3144efa6647b7b08"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a66766d69d2f6dd4c3144efa6647b7b08">onAbort</a></td></tr>
<tr class="memdesc:a66766d69d2f6dd4c3144efa6647b7b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel the experiment, if it's running.  <a href="#a66766d69d2f6dd4c3144efa6647b7b08"></a><br/></td></tr>
<tr class="memitem:ac066ea44d0e838235e5999631c818a4e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#ac066ea44d0e838235e5999631c818a4e">run</a></td></tr>
<tr class="memdesc:ac066ea44d0e838235e5999631c818a4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the experiment.  <a href="#ac066ea44d0e838235e5999631c818a4e"></a><br/></td></tr>
<tr class="memitem:a23215d6df78c0b0bd297f4fdaa238577"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a23215d6df78c0b0bd297f4fdaa238577">createValidActionTable</a></td></tr>
<tr class="memdesc:a23215d6df78c0b0bd297f4fdaa238577"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an ActionTable by calling self.generateActions, and give our Devices a chance to sign off on it.  <a href="#a23215d6df78c0b0bd297f4fdaa238577"></a><br/></td></tr>
<tr class="memitem:a01193902065fd76cbea91263aca8b71a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a01193902065fd76cbea91263aca8b71a">sanityCheckEnvironment</a></td></tr>
<tr class="memdesc:a01193902065fd76cbea91263aca8b71a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform any necessary sanity checks to ensure that the environment is set up properly.  <a href="#a01193902065fd76cbea91263aca8b71a"></a><br/></td></tr>
<tr class="memitem:aa74866b563da4b577cc8897e2397bcdc"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#aa74866b563da4b577cc8897e2397bcdc">prepareHandlers</a></td></tr>
<tr class="memdesc:aa74866b563da4b577cc8897e2397bcdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare all of the handlers needed in the experiment so that they're in the correct mode.  <a href="#aa74866b563da4b577cc8897e2397bcdc"></a><br/></td></tr>
<tr class="memitem:ae5f3286e42ca7aec4af1c5f0990ecf92"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#ae5f3286e42ca7aec4af1c5f0990ecf92">examineActions</a></td></tr>
<tr class="memdesc:ae5f3286e42ca7aec4af1c5f0990ecf92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow devices to examine the ActionTable we will be running, and modify it if necessary.  <a href="#ae5f3286e42ca7aec4af1c5f0990ecf92"></a><br/></td></tr>
<tr class="memitem:a2076246668e728bdc8735f184de0f711"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a2076246668e728bdc8735f184de0f711">lastMinuteActions</a></td></tr>
<tr class="memdesc:a2076246668e728bdc8735f184de0f711"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do any last-minute actions immediately before starting the experiment.  <a href="#a2076246668e728bdc8735f184de0f711"></a><br/></td></tr>
<tr class="memitem:ac4eece6be07df572ba47a96f25fd5f49"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#ac4eece6be07df572ba47a96f25fd5f49">generateActions</a></td></tr>
<tr class="memdesc:ac4eece6be07df572ba47a96f25fd5f49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate an ActionTable of events to perform during the experiment.  <a href="#ac4eece6be07df572ba47a96f25fd5f49"></a><br/></td></tr>
<tr class="memitem:a409985973ef0710784dd77028fb71c14"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a409985973ef0710784dd77028fb71c14">execute</a></td></tr>
<tr class="memdesc:a409985973ef0710784dd77028fb71c14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the experiment.  <a href="#a409985973ef0710784dd77028fb71c14"></a><br/></td></tr>
<tr class="memitem:a5093b70e33492935f13092e1ee708918"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a5093b70e33492935f13092e1ee708918">cleanup</a></td></tr>
<tr class="memdesc:a5093b70e33492935f13092e1ee708918"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the provided thread(s) to finish, then clean up our handlers.  <a href="#a5093b70e33492935f13092e1ee708918"></a><br/></td></tr>
<tr class="memitem:a8155097a3ac87d791971aef3cdcaa399"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a8155097a3ac87d791971aef3cdcaa399">generateTitles</a></td></tr>
<tr class="memdesc:a8155097a3ac87d791971aef3cdcaa399"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate the "titles" that provide extra miscellaneous information about the experiment.  <a href="#a8155097a3ac87d791971aef3cdcaa399"></a><br/></td></tr>
<tr class="memitem:a0fdb7f958de94fb39a00bfeccc861706"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a0fdb7f958de94fb39a00bfeccc861706">expose</a></td></tr>
<tr class="memdesc:a0fdb7f958de94fb39a00bfeccc861706"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an exposure to the provided ActionTable.  <a href="#a0fdb7f958de94fb39a00bfeccc861706"></a><br/></td></tr>
<tr class="memitem:a123a0af6a53ab946a17819a778bfcf01"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a123a0af6a53ab946a17819a778bfcf01">resetCams</a></td></tr>
<tr class="memdesc:a123a0af6a53ab946a17819a778bfcf01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a set of cameras and a time, trigger the cameras and record that we want to throw away the resulting image.  <a href="#a123a0af6a53ab946a17819a778bfcf01"></a><br/></td></tr>
<tr class="memitem:acf802684a4e13e1e3ca74d8f935038c7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#acf802684a4e13e1e3ca74d8f935038c7">getTimeWhenCameraCanExpose</a></td></tr>
<tr class="memdesc:acf802684a4e13e1e3ca74d8f935038c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a camera handle, return the next time that it will be safe to start an exposure with that camera, based on its last trigger time, its readout time, and its exposure mode:  <a href="#acf802684a4e13e1e3ca74d8f935038c7"></a><br/></td></tr>
<tr class="memitem:ac1c017f4d004eefcc00ae5db2121e5bd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#ac1c017f4d004eefcc00ae5db2121e5bd">getExposureTimeForCamera</a></td></tr>
<tr class="memdesc:ac1c017f4d004eefcc00ae5db2121e5bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a calculated exposure time for the specified camera handler, based on our exposure settings.  <a href="#ac1c017f4d004eefcc00ae5db2121e5bd"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a75a13c01c8678e82dcb905571add710d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a75a13c01c8678e82dcb905571add710d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>numReps</b></td></tr>
<tr class="memitem:a9698f01115751fe831882600933fa640"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9698f01115751fe831882600933fa640"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>repDuration</b></td></tr>
<tr class="memitem:a779d5d3f56a77b638c3dd1feb137d2d5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a779d5d3f56a77b638c3dd1feb137d2d5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>zPositioner</b></td></tr>
<tr class="memitem:a0985fdd13121814a88989f9d7b4d71e6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0985fdd13121814a88989f9d7b4d71e6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>zBottom</b></td></tr>
<tr class="memitem:a93595858561b7d26d375cefa3f3340cf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a93595858561b7d26d375cefa3f3340cf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>zHeight</b></td></tr>
<tr class="memitem:ac4dac6b4a12ae198061de1ee5a2a9c8e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac4dac6b4a12ae198061de1ee5a2a9c8e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>sliceHeight</b></td></tr>
<tr class="memitem:a78f6885ad546479e2e13804f55c45ec0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78f6885ad546479e2e13804f55c45ec0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>cameras</b></td></tr>
<tr class="memitem:a275005a45dbeadb318fb3785c49ad792"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a275005a45dbeadb318fb3785c49ad792"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>lights</b></td></tr>
<tr class="memitem:a7336c0c1dd582f409a325ded945bb034"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7336c0c1dd582f409a325ded945bb034"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>exposureSettings</b></td></tr>
<tr class="memitem:aa18c4ac45162176d9f926816547e319f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa18c4ac45162176d9f926816547e319f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>otherHandlers</b></td></tr>
<tr class="memitem:ae03cde5eb06011b59d427e925b472007"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae03cde5eb06011b59d427e925b472007"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>metadata</b></td></tr>
<tr class="memitem:aa96030e251ae387abe53b77b78861546"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa96030e251ae387abe53b77b78861546"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>savePath</b></td></tr>
<tr class="memitem:a599588fddf2c91c5f4fe341d94a1f913"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a599588fddf2c91c5f4fe341d94a1f913">allHandlers</a></td></tr>
<tr class="memdesc:a599588fddf2c91c5f4fe341d94a1f913"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of all handlers we care about, so we can conveniently set them up.  <a href="#a599588fddf2c91c5f4fe341d94a1f913"></a><br/></td></tr>
<tr class="memitem:ac44193712cb4883164515d1a50f5f7da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#ac44193712cb4883164515d1a50f5f7da">cameraToReadoutTime</a></td></tr>
<tr class="memdesc:ac44193712cb4883164515d1a50f5f7da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps camera handlers to their minimum time between exposures.  <a href="#ac44193712cb4883164515d1a50f5f7da"></a><br/></td></tr>
<tr class="memitem:a8ce8c86da5be2520f5f8179c875d33ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a8ce8c86da5be2520f5f8179c875d33ef">cameraToIsReady</a></td></tr>
<tr class="memdesc:a8ce8c86da5be2520f5f8179c875d33ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps cameras to whether or not they need to be blanked before they next take an image (because they expose continuously and other cameras have taken images while they were waiting).  <a href="#a8ce8c86da5be2520f5f8179c875d33ef"></a><br/></td></tr>
<tr class="memitem:a24e340996be7c3fd84d792988628fa50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a24e340996be7c3fd84d792988628fa50">cameraToImageCount</a></td></tr>
<tr class="memdesc:a24e340996be7c3fd84d792988628fa50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps camera handlers to how many images we'll be taking with that camera.  <a href="#a24e340996be7c3fd84d792988628fa50"></a><br/></td></tr>
<tr class="memitem:a879bef14658fa5ba501b4890dd462811"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a879bef14658fa5ba501b4890dd462811">cameraToIgnoredImageIndices</a></td></tr>
<tr class="memdesc:a879bef14658fa5ba501b4890dd462811"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps camera handlers to indices of which images we will be ignoring from them.  <a href="#a879bef14658fa5ba501b4890dd462811"></a><br/></td></tr>
<tr class="memitem:a67b12d77ff3dd54450c4e60db56ef691"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a67b12d77ff3dd54450c4e60db56ef691">shouldAbort</a></td></tr>
<tr class="memdesc:a67b12d77ff3dd54450c4e60db56ef691"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether or not we should stop the experiment at the next opportunity.  <a href="#a67b12d77ff3dd54450c4e60db56ef691"></a><br/></td></tr>
<tr class="memitem:a08b9f50d21ae617ae7bf61b2c14ae474"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08b9f50d21ae617ae7bf61b2c14ae474"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a08b9f50d21ae617ae7bf61b2c14ae474">initialZPos</a></td></tr>
<tr class="memdesc:a08b9f50d21ae617ae7bf61b2c14ae474"><td class="mdescLeft">&#160;</td><td class="mdescRight">Z position when we started, so we can restore it at the end. <br/></td></tr>
<tr class="memitem:a06320f585628a854bbf684854221b55f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classexperiment_1_1experiment_1_1_experiment.html#a06320f585628a854bbf684854221b55f">lightToExposureTime</a></td></tr>
<tr class="memdesc:a06320f585628a854bbf684854221b55f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps light sources to sets of exposure times used.  <a href="#a06320f585628a854bbf684854221b55f"></a><br/></td></tr>
<tr class="memitem:a9dfa002ad39fd42ae529dd5a9d956436"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9dfa002ad39fd42ae529dd5a9d956436"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>table</b></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class is the root class for generating and running experiments. </p>
<p>You should make a subclass of this class to implement a specific experiment type. </p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2eb466bdd54f066ce60f422aa87a35de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>numReps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>repDuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zPositioner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zBottom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zHeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sliceHeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cameras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>exposureSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>otherHandlers</em> = <code>[]</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>metadata</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>savePath</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This constructor accepts certain parameters that will be shared by all experiment types. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numReps</td><td>Number of repetitions of the experiment to perform. </td></tr>
    <tr><td class="paramname">repDuration</td><td>Amount of time to spend on each repetition, or 0 to spend as little as possible. In seconds. </td></tr>
    <tr><td class="paramname">zPositioner</td><td>StagePositioner handler to use to move in Z. </td></tr>
    <tr><td class="paramname">zBottom</td><td>Altitude of the stage at the bottom of the stack. </td></tr>
    <tr><td class="paramname">zHeight</td><td>Total height of the stack. </td></tr>
    <tr><td class="paramname">sliceHeight</td><td>Distance between slices in the stack. </td></tr>
    <tr><td class="paramname">cameras</td><td>List of CameraHandler instances. </td></tr>
    <tr><td class="paramname">lights</td><td>List of LightSourceHandler instances. </td></tr>
    <tr><td class="paramname">exposureSettings</td><td>List of ([cameras], [(light, exposure time)]) tuples describing how to take images. </td></tr>
    <tr><td class="paramname">otherHandlers</td><td>List of miscellaneous handlers that are involved in the experiment. </td></tr>
    <tr><td class="paramname">metadata</td><td>String of extra metadata to insert into the "titles" section of the saved file. </td></tr>
    <tr><td class="paramname">savePath</td><td>Path to save image data to. If this isn't provided then no data will be saved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="a5093b70e33492935f13092e1ee708918"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.cleanup </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>runThread</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>saveThread</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for the provided thread(s) to finish, then clean up our handlers. </p>

<p>Reimplemented in <a class="el" href="classexperiment_1_1structured_illumination_1_1_s_i_experiment.html#a0738eda6cfa119bbbc6541e4570739f0">experiment.structuredIllumination.SIExperiment</a>.</p>

</div>
</div>
<a class="anchor" id="a23215d6df78c0b0bd297f4fdaa238577"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.createValidActionTable </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an ActionTable by calling self.generateActions, and give our Devices a chance to sign off on it. </p>

</div>
</div>
<a class="anchor" id="ae5f3286e42ca7aec4af1c5f0990ecf92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.examineActions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow devices to examine the ActionTable we will be running, and modify it if necessary. </p>

</div>
</div>
<a class="anchor" id="a409985973ef0710784dd77028fb71c14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.execute </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the experiment. </p>
<p>Return True if it was successful. </p>

<p>Reimplemented in <a class="el" href="classexperiment_1_1opto_script_example_1_1_opto_experiment.html#a3275f2fbf1b5f0dd33d19e9ee40336b8">experiment.optoScriptExample.OptoExperiment</a>, and <a class="el" href="classexperiment_1_1stuttered_z_stack_1_1_stuttered_z_stack_experiment.html#a82f68cd5da895312fbd85e70c65f3f29">experiment.stutteredZStack.StutteredZStackExperiment</a>.</p>

</div>
</div>
<a class="anchor" id="a0fdb7f958de94fb39a00bfeccc861706"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.expose </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>curTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cameras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lightTimePairs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an exposure to the provided ActionTable. </p>
<p>We're provided with the cameras and lights to use for the exposure, as well as how long to expose each light for and when we're allowed to start. We need to enforce that all of the cameras are ready to go before we trigger them. We also need to enforce that any frame-transer cameras have not seen any light since the last time they were blanked. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lightTimePairs</td><td>List of (light, exposure time) tuples describing how long to expose each light for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The time at which all exposures are complete. </dd></dl>

<p>Reimplemented in <a class="el" href="classexperiment_1_1swept_shutter_1_1_open_shutter_sweep_experiment.html#a5171426ab728836ad4ba13309932180d">experiment.sweptShutter.OpenShutterSweepExperiment</a>.</p>

</div>
</div>
<a class="anchor" id="ac4eece6be07df572ba47a96f25fd5f49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.generateActions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate an ActionTable of events to perform during the experiment. </p>
<p>Return the ActionTable instance. </p>

<p>Reimplemented in <a class="el" href="classexperiment_1_1structured_illumination_1_1_s_i_experiment.html#abdeb6881a0d659baf26a79adfe0fd8b3">experiment.structuredIllumination.SIExperiment</a>, <a class="el" href="classexperiment_1_1swept_shutter_1_1_open_shutter_sweep_experiment.html#a18d78915664a94b502019e98d3862f7e">experiment.sweptShutter.OpenShutterSweepExperiment</a>, <a class="el" href="classexperiment_1_1z_stack_1_1_z_stack_experiment.html#a2af0045376918cbf3290284b9e044f6b">experiment.zStack.ZStackExperiment</a>, and <a class="el" href="classexperiment_1_1z_stack_multi_1_1_z_stack_multi_experiment.html#a6e9cab753d181f2d8995705b20dd9dfc">experiment.zStackMulti.ZStackMultiExperiment</a>.</p>

</div>
</div>
<a class="anchor" id="a8155097a3ac87d791971aef3cdcaa399"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.generateTitles </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate the "titles" that provide extra miscellaneous information about the experiment. </p>
<p>These are part of the MRC file format spec: <a href="http://msg.ucsf.edu/IVE/IVE4_HTML/IM_ref2.html">http://msg.ucsf.edu/IVE/IVE4_HTML/IM_ref2.html</a> There can be up to 10 titles and they can have up to 80 characters each. We group them by device type. </p>

</div>
</div>
<a class="anchor" id="ac1c017f4d004eefcc00ae5db2121e5bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.getExposureTimeForCamera </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>camera</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a calculated exposure time for the specified camera handler, based on our exposure settings. </p>

</div>
</div>
<a class="anchor" id="acf802684a4e13e1e3ca74d8f935038c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.getTimeWhenCameraCanExpose </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>camera</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a camera handle, return the next time that it will be safe to start an exposure with that camera, based on its last trigger time, its readout time, and its exposure mode: </p>
<ul>
<li>For TRIGGER_AFTER cameras (i.e. frame transfer cameras), the exposure starts immediately after the last trigger event for the camera, but the next trigger time may be postponed to ensure the camera is ready to readout at the end of the exposure.</li>
<li>For TRIGGER_DURATION cameras (i.e. external exposure), the camera must wait (camera readout time) after the last trigger event before it can be triggered again.</li>
<li>For TRIGGER_BEFORE cameras (non-frame-transfer external trigger), the camera must wait (camera readout time + camera exposure time) after the last trigger event before it can be triggered again. </li>
</ul>

</div>
</div>
<a class="anchor" id="a2076246668e728bdc8735f184de0f711"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.lastMinuteActions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do any last-minute actions immediately before starting the experiment. </p>
<p>Return False if anything goes wrong. </p>

</div>
</div>
<a class="anchor" id="a66766d69d2f6dd4c3144efa6647b7b08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.onAbort </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel the experiment, if it's running. </p>

<p>Reimplemented in <a class="el" href="classexperiment_1_1stuttered_z_stack_1_1_stuttered_z_stack_experiment.html#a19fc530c1b5866bb24cc50374478d0a7">experiment.stutteredZStack.StutteredZStackExperiment</a>.</p>

</div>
</div>
<a class="anchor" id="aa74866b563da4b577cc8897e2397bcdc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.prepareHandlers </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare all of the handlers needed in the experiment so that they're in the correct mode. </p>

</div>
</div>
<a class="anchor" id="a123a0af6a53ab946a17819a778bfcf01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.resetCams </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>curTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cameras</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a set of cameras and a time, trigger the cameras and record that we want to throw away the resulting image. </p>
<p>This blanks the camera sensors so they don't record light that we don't care about. </p>

</div>
</div>
<a class="anchor" id="ac066ea44d0e838235e5999631c818a4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the experiment. </p>
<p>We spin off the actual execution and cleanup into separate threads. </p>

<p>Reimplemented in <a class="el" href="classexperiment_1_1offset_gain_correction_1_1_offset_gain_correction_experiment.html#a8c223c2930a0f482873d971f9b2d0331">experiment.offsetGainCorrection.OffsetGainCorrectionExperiment</a>, and <a class="el" href="classexperiment_1_1response_map_1_1_response_map_experiment.html#ab8474cb700b0df68864dc2d08a423d88">experiment.responseMap.ResponseMapExperiment</a>.</p>

</div>
</div>
<a class="anchor" id="a01193902065fd76cbea91263aca8b71a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def experiment.experiment.Experiment.sanityCheckEnvironment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform any necessary sanity checks to ensure that the environment is set up properly. </p>
<p>Raise an exception if anything is wrong. </p>

</div>
</div>
<h2>Member Data Documentation</h2>
<a class="anchor" id="a599588fddf2c91c5f4fe341d94a1f913"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">experiment.experiment.Experiment.allHandlers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List of all handlers we care about, so we can conveniently set them up. </p>

</div>
</div>
<a class="anchor" id="a879bef14658fa5ba501b4890dd462811"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">experiment.experiment.Experiment.cameraToIgnoredImageIndices</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps camera handlers to indices of which images we will be ignoring from them. </p>

</div>
</div>
<a class="anchor" id="a24e340996be7c3fd84d792988628fa50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">experiment.experiment.Experiment.cameraToImageCount</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps camera handlers to how many images we'll be taking with that camera. </p>

</div>
</div>
<a class="anchor" id="a8ce8c86da5be2520f5f8179c875d33ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">experiment.experiment.Experiment.cameraToIsReady</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps cameras to whether or not they need to be blanked before they next take an image (because they expose continuously and other cameras have taken images while they were waiting). </p>

</div>
</div>
<a class="anchor" id="ac44193712cb4883164515d1a50f5f7da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">experiment.experiment.Experiment.cameraToReadoutTime</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps camera handlers to their minimum time between exposures. </p>

</div>
</div>
<a class="anchor" id="a06320f585628a854bbf684854221b55f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">experiment.experiment.Experiment.lightToExposureTime</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps light sources to sets of exposure times used. </p>
<p>This is helpful when setting the "titles" in the MRC header. </p>

</div>
</div>
<a class="anchor" id="a67b12d77ff3dd54450c4e60db56ef691"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">experiment.experiment.Experiment.shouldAbort</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether or not we should stop the experiment at the next opportunity. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>experiment/experiment.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 3 2014 14:02:37 for OMX Cockpit by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
